# name: rack route
# --
app = lambda { |env|
  req = Rack::Request.new(env)
  head = {
     'Content-Type' => 'text/plain'
  }
  body = 'hi,' + req.params['id']
  [200, head , [body]]
}

map = Rack::URLMap.new({
                         '/foo/bar/' => app
                         $0
                       })

res = Rack::MockRequest.new(map).get("/foo/bar/?id=1").body

