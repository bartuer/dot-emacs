# name: iphone html
# --
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title></title>
<script src="/javascripts/lib.prototype.js"></script>
</head>
<body id="main">
      $0

<script src="/javascripts/lib.pusher.js"></script>
<script type="text/javascript">
var pusher = new Pusher.Client("/pusher", "cmd", function (cmd) {
  this.request = 'XMLHttpRequest' in window ? XMLHttpRequest : null;

  this.ieXhr = function () {
    function object(str) {
      try {
        return new ActiveXObject(str);
      } catch (e) {}
    }
    return object('Msxml2.XMLHTTP.6.0') || object('Msxml2.XMLHTTP.3.0') || object('Msxml2.XMLHTTP') || object('Microsoft.XMLHTTP');
  };

  this.hasXhr = function () {
    return this.request || 'ActiveXObject' in this;
  };

  this.xhr = function () {
    return this.ieXhr() || new this.request();
  };

  if (cmd.match(/\.js/)) {
    if (this.hasXhr()) {
      var request = this.xhr();
      request.open('GET', '/javascripts/' + cmd, false);
      request.send(null);
      if (request.readyState === 4 && (request.status === 0 || request.status.toString().charAt(0) === '2')) {
        eval(request.responseText);
      }
    }
  } else {
    eval(cmd);
  }
});
</script>
</body>
</html>


